<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physic-mon Online: 60 Quests Edition</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Lexend:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --pk-blue: #3d7dca; --pk-yellow: #ffcb05; --pk-red: #ff4444; --pk-green: #4caf50; }
        body { background: #1a1a1a; font-family: 'Lexend', sans-serif; margin: 0; display: flex; justify-content: center; align-items: center; height: 100vh; color: white; overflow: hidden; }
        #game-console { width: 1000px; height: 600px; background: #333; border-radius: 30px; display: flex; padding: 20px; box-shadow: 0 15px 0 #111; border: 5px solid #555; position: relative; }
        #screen { flex: 2.5; background: #87ceeb; border: 8px solid #222; border-radius: 15px; position: relative; overflow: hidden; display: flex; flex-direction: column; }
        #sidebar { flex: 0.8; margin-left: 20px; background: #2d2d2d; border-radius: 15px; padding: 15px; border: 2px solid var(--pk-yellow); display: flex; flex-direction: column; }
        #battle-view { flex: 1; position: relative; background: url('https://img.freepik.com/free-vector/pixel-art-grass-field-background_158502-132.jpg') bottom; background-size: cover; }
        .monster-box { position: absolute; top: 20px; right: 40px; background: rgba(255,255,255,0.9); padding: 10px; border: 3px solid #000; color: #000; border-radius: 8px; width: 220px; }
        .player-box { position: absolute; bottom: 10px; left: 20px; background: rgba(255,255,255,0.9); padding: 10px; border: 3px solid #000; color: #000; border-radius: 8px; width: 220px; }
        .hp-bar { height: 12px; background: #ddd; border: 1px solid #000; margin-top: 5px; overflow: hidden; }
        .hp-fill { height: 100%; background: var(--pk-green); width: 100%; transition: 0.4s; }
        #quiz-area { height: 220px; background: #fff; color: #333; padding: 20px; border-top: 5px solid #000; box-sizing: border-box; }
        .ans-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 15px; }
        .ans-btn { background: #f8f9fa; border: 2px solid #333; padding: 12px; cursor: pointer; font-size: 0.9rem; font-family: 'Lexend'; font-weight: bold; transition: 0.2s; }
        .ans-btn:hover { background: var(--pk-blue); color: white; transform: translateY(-2px); }
        #setup { position: absolute; inset: 0; background: #fff; z-index: 50; color: #333; display: flex; flex-direction: column; align-items: center; padding: 30px; }
        .char-list { display: flex; gap: 20px; margin: 30px 0; }
        .char-card { border: 4px solid #eee; padding: 15px; cursor: pointer; text-align: center; width: 130px; border-radius: 15px; background: #fff; }
        .char-card.selected { border-color: var(--pk-blue); background: #e3f2fd; box-shadow: 0 5px 15px rgba(61,125,202,0.3); }
        .char-card img { width: 80px; height: 80px; }
        .leader-item { font-size: 0.85rem; margin-bottom: 10px; padding: 8px; background: #444; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; }
        .pixel { font-family: 'Press Start 2P'; font-size: 10px; }
    </style>
</head>
<body>

<div id="game-console">
    <div id="screen">
        <div id="setup">
            <h2 class="pixel" style="font-size: 18px; color: var(--pk-blue);">PHYSIC-MON ADVENTURE</h2>
            <input type="text" id="p-name" placeholder="Trainer Name..." style="padding: 12px; width: 300px; margin: 20px; font-size: 1.1rem; border-radius: 10px; border: 3px solid #ccc; text-align: center;">
            <div class="char-list">
                <div class="char-card" onclick="pick('Red', this)"><img src="https://img.icons8.com/color/96/pokemon-trainer-red.png"><br><b>RED</b></div>
                <div class="char-card" onclick="pick('Leaf', this)"><img src="https://img.icons8.com/color/96/pokemon-trainer-leaf.png"><br><b>LEAF</b></div>
                <div class="char-card" onclick="pick('Ken', this)"><img src="https://img.icons8.com/color/96/worker-male--v1.png"><br><b>KEN</b></div>
                <div class="char-card" onclick="pick('Pika', this)"><img src="https://img.icons8.com/color/96/pikachu-pokemon.png"><br><b>PIKA</b></div>
            </div>
            <button onclick="startGame()" style="background: var(--pk-red); color: white; padding: 20px 60px; border: none; cursor: pointer; border-radius: 50px; font-weight: bold;" class="pixel">START BATTLE</button>
        </div>

        <div id="battle-view">
            <div class="monster-box">
                <div id="m-name" style="font-weight:bold; font-size: 0.8rem;">WILD PHYSICS</div>
                <div class="hp-bar"><div id="m-hp" class="hp-fill"></div></div>
            </div>
            <div class="player-box">
                <div id="display-name" style="font-weight:bold; font-size: 0.8rem;">PLAYER</div>
                <div class="hp-bar"><div id="p-hp" class="hp-fill"></div></div>
            </div>
            <img id="m-sprite" src="https://img.icons8.com/color/144/dragonite.png" style="position:absolute; top:40px; right:70px; width:130px;">
            <img id="p-sprite" src="" style="position:absolute; bottom:20px; left:60px; width:110px; transform: scaleX(-1);">
        </div>

        <div id="quiz-area">
            <div id="q-text" style="font-weight: bold; font-size: 1.1rem; color: #222;">...</div>
            <div class="ans-grid" id="ans-grid"></div>
        </div>
    </div>

    <div id="sidebar">
        <div class="pixel" style="color: var(--pk-yellow); margin-bottom: 15px; text-align: center;">TRAINER RANK</div>
        <div id="leaderboard-list" style="overflow-y: auto;"></div>
    </div>
</div>

<script>
    // --- FIREBASE SETUP ---
    const firebaseConfig = {
        apiKey: "AIzaSyAVAd78Y9OUKFdfkPsV96uj2IjFwWu1rAc",
        authDomain: "mark-d1f3f.firebaseapp.com",
        databaseURL: "https://mark-d1f3f-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "mark-d1f3f",
        storageBucket: "mark-d1f3f.firebasestorage.app",
        messagingSenderId: "937114827864",
        appId: "1:937114827864:web:24906a17f19c510714de2d"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // --- 60 ENGLISH QUESTIONS DATABASE ---
    const quizData = [
        // 1-10: Simple Machines Bascis
        { q: "What is the fixed point around which a lever rotates?", a: ["Effort", "Fulcrum", "Load", "Axle"], c: 1 },
        { q: "Which class of lever has the load between the fulcrum and effort?", a: ["1st Class", "2nd Class", "3rd Class", "4th Class"], c: 1 },
        { q: "A crowbar used to lift a stone is an example of which lever?", a: ["1st Class", "2nd Class", "3rd Class", "Pulley"], c: 0 },
        { q: "Which machine is essentially a ramp wrapped around a cylinder?", a: ["Wedge", "Screw", "Lever", "Pulley"], c: 1 },
        { q: "A doorknob represents which simple machine?", a: ["Wheel and Axle", "Screw", "Wedge", "Pulley"], c: 0 },
        { q: "What simple machine is used to split wood?", a: ["Lever", "Wedge", "Screw", "Pulley"], c: 1 },
        { q: "Which pulley only changes the direction of the force?", a: ["Fixed Pulley", "Movable Pulley", "Compound Pulley", "Block and Tackle"], c: 0 },
        { q: "Tweezers and fishing rods are examples of which lever?", a: ["1st Class", "2nd Class", "3rd Class", "Inclined Plane"], c: 2 },
        { q: "Mechanical Advantage (MA) is Output Force divided by...?", a: ["Mass", "Gravity", "Input Force", "Distance"], c: 2 },
        { q: "Which of these is NOT a simple machine?", a: ["Pulley", "Inclined Plane", "Electric Motor", "Wedge"], c: 2 },
        // 11-20: Kinetic Energy
        { q: "Kinetic energy is the energy of...?", a: ["Position", "Motion", "Height", "Stretch"], c: 1 },
        { q: "What is the formula for Kinetic Energy (KE)?", a: ["mgh", "1/2 mv^2", "F * d", "m/v"], c: 1 },
        { q: "If the velocity of an object is doubled, its KE increases by...?", a: ["2 times", "4 times", "8 times", "Stays same"], c: 1 },
        { q: "Which has more KE: a 2kg ball at 4m/s or a 4kg ball at 2m/s?", a: ["2kg ball", "4kg ball", "Both same", "None"], c: 0 },
        { q: "In the KE formula, what does 'v' stand for?", a: ["Volume", "Voltage", "Velocity", "Vacuum"], c: 2 },
        { q: "Unit of energy is named after...?", a: ["Newton", "Watt", "Joule", "Einstein"], c: 2 },
        { q: "A car parked on a flat street has how much KE?", a: ["Max", "Average", "Zero", "100J"], c: 2 },
        { q: "If an object stops moving, its KE is converted mainly into...?", a: ["Potential", "Heat", "Sound", "Both B and C"], c: 3 },
        { q: "KE is a scalar quantity. Its value is always...?", a: ["Negative", "Positive or Zero", "Zero only", "Infinite"], c: 1 },
        { q: "Which factor has a greater effect on KE: Mass or Velocity?", a: ["Mass", "Velocity", "Both equal", "Gravity"], c: 1 },
        // 21-30: Potential Energy
        { q: "Potential energy is the energy of...?", a: ["Motion", "Position", "Speed", "Heat"], c: 1 },
        { q: "What is the formula for Gravitational Potential Energy?", a: ["1/2 mv^2", "mgh", "F = ma", "P = IV"], c: 1 },
        { q: "The 'g' in mgh on Earth is approximately...?", a: ["5 m/s^2", "9.8 m/s^2", "12 m/s^2", "0 m/s^2"], c: 1 },
        { q: "An archer pulls a bow. What energy is stored in the string?", a: ["Kinetic", "Gravitational Potential", "Elastic Potential", "Chemical"], c: 2 },
        { q: "If you lift a box 3 times higher, its PE...?", a: ["Triples", "Doubles", "Decreases", "Square"], c: 0 },
        { q: "PE depends on height, mass, and...?", a: ["Speed", "Time", "Gravity", "Color"], c: 2 },
        { q: "Energy stored in food or batteries is...?", a: ["Kinetic", "Chemical Potential", "Nuclear", "Light"], c: 1 },
        { q: "A ball rolling down a hill is losing _____ and gaining _____?", a: ["KE, PE", "PE, KE", "Heat, PE", "Mass, KE"], c: 1 },
        { q: "Total Mechanical Energy is the sum of...?", a: ["PE + Heat", "KE + PE", "Force + Speed", "Work + Power"], c: 1 },
        { q: "At the highest point of a swing, the child has max...?", a: ["KE", "PE", "Friction", "Velocity"], c: 1 },
        // 31-40: Work and Power
        { q: "Work is done only when a force causes...?", a: ["Heat", "Displacement", "Noise", "Weight"], c: 1 },
        { q: "Formula for Work (W) is...?", a: ["F / d", "F * d", "m * g", "1/2 mv"], c: 1 },
        { q: "If you push a wall and it doesn't move, work done is...?", a: ["Maximum", "Minimum", "Zero", "100J"], c: 2 },
        { q: "Rate of doing work is called...?", a: ["Energy", "Power", "Force", "Momentum"], c: 1 },
        { q: "Unit of Power is...?", a: ["Joule", "Newton", "Watt", "Volt"], c: 2 },
        { q: "1 Watt is equal to...?", a: ["1 J/s", "1 N/m", "1 kg/m", "1 m/s"], c: 0 },
        { q: "Which machine has a Mechanical Advantage of 1?", a: ["Fixed Pulley", "Movable Pulley", "Lever", "Inclined Plane"], c: 0 },
        { q: "Simple machines make work easier by reducing...?", a: ["Energy needed", "Input Force", "Total Work", "Gravity"], c: 1 },
        { q: "Efficiency of a machine is always less than...?", a: ["50%", "100%", "0%", "200%"], c: 1 },
        { q: "The energy 'lost' in machines is usually due to...?", a: ["Gravity", "Friction", "Speed", "Mass"], c: 1 },
        // 41-50: Advanced Simple Machines
        { q: "A staircase is an example of which machine?", a: ["Inclined Plane", "Wedge", "Lever", "Pulley"], c: 0 },
        { q: "What is the MA of a pulley system with 4 supporting ropes?", a: ["1", "2", "4", "0.5"], c: 2 },
        { q: "In a 2nd class lever, the effort arm is always ____ the load arm.", a: ["Shorter than", "Longer than", "Equal to", "Opposite to"], c: 1 },
        { q: "A bottle opener is which type of lever?", a: ["1st Class", "2nd Class", "3rd Class", "Screw"], c: 1 },
        { q: "Steering wheels use which principle?", a: ["Wheel and Axle", "Pulley", "Wedge", "Lever"], c: 0 },
        { q: "Zippers use which simple machine to work?", a: ["Lever", "Wedge", "Pulley", "Screw"], c: 1 },
        { q: "As the angle of an inclined plane increases, the force needed...?", a: ["Increases", "Decreases", "Stays same", "Becomes zero"], c: 0 },
        { q: "A nutcracker is an example of...?", a: ["1st class lever", "2nd class lever", "3rd class lever", "Wedge"], c: 1 },
        { q: "Which part of a screw is an inclined plane?", a: ["The head", "The threads", "The length", "The tip"], c: 1 },
        { q: "An axe splitting a log converts downward force into...?", a: ["Upward force", "Sideways force", "Circular force", "Heat only"], c: 1 },
        // 51-60: Energy Transformation & Conservation
        { q: "Law of Conservation of Energy states energy cannot be...?", a: ["Changed", "Measured", "Created", "Stored"], c: 2 },
        { q: "A falling apple converts PE into...?", a: ["KE", "Chemical", "Nuclear", "Elastic"], c: 0 },
        { q: "Hydroelectric dams convert the energy of falling water into...?", a: ["Heat", "Electricity", "Light", "Sound"], c: 1 },
        { q: "Friction converts kinetic energy into _____ energy.", a: ["Potential", "Thermal", "Solar", "Chemical"], c: 1 },
        { q: "When you jump on a trampoline, KE becomes...?", a: ["Elastic PE", "Gravity", "Nuclear", "Light"], c: 0 },
        { q: "Energy is measured in Joules. Power is measured in...?", a: ["Watts", "Newtons", "Pascals", "Meters"], c: 0 },
        { q: "A lightbulb converts electrical energy into...?", a: ["Light and Heat", "Sound", "Kinetic", "Potential"], c: 0 },
        { q: "Nuclear power plants split atoms to release...?", a: ["Kinetic energy", "Thermal energy", "Chemical energy", "Potential energy"], c: 1 },
        { q: "A microphone converts sound energy into...?", a: ["Light", "Electrical", "Kinetic", "Potential"], c: 1 },
        { q: "The ultimate source of energy for Earth is...?", a: ["The Moon", "The Sun", "Wind", "Volcanoes"], c: 1 }
    ];

    let myName = "", myChar = "", score = 0, enemyHP = 100, playerHP = 100;
    const monsterSprites = [
        "https://img.icons8.com/color/144/dragonite.png",
        "https://img.icons8.com/color/144/charizard.png",
        "https://img.icons8.com/color/144/gyarados.png",
        "https://img.icons8.com/color/144/mewtwo.png"
    ];

    function pick(job, el) {
        myChar = job;
        document.querySelectorAll('.char-card').forEach(c => c.classList.remove('selected'));
        el.classList.add('selected');
        document.getElementById('p-sprite').src = el.querySelector('img').src;
    }

    function startGame() {
        myName = document.getElementById('p-name').value;
        if(!myName || !myChar) return alert("Please enter name and pick a trainer!");
        document.getElementById('setup').style.display = 'none';
        document.getElementById('display-name').innerText = myName;

        db.ref('players/' + myName).set({ score: 0, char: myChar });
        db.ref('players/' + myName).onDisconnect().remove();

        loadQuestion();
        syncLeaderboard();
    }

    function loadQuestion() {
        const qIdx = Math.floor(Math.random() * quizData.length);
        const data = quizData[qIdx];
        document.getElementById('q-text').innerText = data.q;
        const grid = document.getElementById('ans-grid');
        grid.innerHTML = "";
        data.a.forEach((txt, i) => {
            const btn = document.createElement('button');
            btn.className = "ans-btn";
            btn.innerText = txt;
            btn.onclick = () => checkAnswer(i, data.c);
            grid.appendChild(btn);
        });
    }

    function checkAnswer(picked, correct) {
        if(picked === correct) {
            score += 10;
            enemyHP -= 25;
            if(enemyHP <= 0) { 
                alert("Enemy Defeated! Stage Clear!"); 
                enemyHP = 100; score += 50; 
                document.getElementById('m-sprite').src = monsterSprites[Math.floor(Math.random()*monsterSprites.length)];
            }
        } else {
            playerHP -= 20;
            alert("Wrong! The Monster attacked you!");
            if(playerHP <= 0) {
                alert("You fainted! Respawning...");
                playerHP = 100;
                score = Math.max(0, score - 20);
            }
        }
        document.getElementById('m-hp').style.width = enemyHP + "%";
        document.getElementById('p-hp').style.width = playerHP + "%";
        db.ref('players/' + myName).update({ score: score });
        loadQuestion();
    }

    function syncLeaderboard() {
        db.ref('players').orderByChild('score').on('value', snap => {
            const list = document.getElementById('leaderboard-list');
            list.innerHTML = "";
            const players = [];
            snap.forEach(child => { players.push({id: child.key, ...child.val()}); });
            players.reverse().forEach(p => {
                list.innerHTML += `
                    <div class="leader-item">
                        <span><b>${p.id}</b></span>
                        <span style="color:var(--pk-yellow)">${p.score}</span>
                    </div>
                `;
            });
        });
    }
</script>
</body>
</html>
